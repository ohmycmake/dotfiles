# ============================================
# 键绑定
# ============================================

# --- 前缀键 ---
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# --- 配置重载 ---
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# --- 窗格分割 ---
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# --- 窗格导航 (prefix + hjkl) ---
# 注意: Ctrl+hjkl 由 vim-tmux-navigator 处理，实现 nvim/tmux 无缝切换
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- 窗格调整大小 (模式切换) ---
# 按 C-a R 进入调整模式，hjkl 调整大小，Enter/Escape 退出
bind R switch-client -T resize-pane

bind -T resize-pane h resize-pane -L 5 \; switch-client -T resize-pane
bind -T resize-pane j resize-pane -D 5 \; switch-client -T resize-pane
bind -T resize-pane k resize-pane -U 5 \; switch-client -T resize-pane
bind -T resize-pane l resize-pane -R 5 \; switch-client -T resize-pane
bind -T resize-pane H resize-pane -L 10 \; switch-client -T resize-pane
bind -T resize-pane J resize-pane -D 10 \; switch-client -T resize-pane
bind -T resize-pane K resize-pane -U 10 \; switch-client -T resize-pane
bind -T resize-pane L resize-pane -R 10 \; switch-client -T resize-pane
bind -T resize-pane Enter switch-client -T root
bind -T resize-pane Escape switch-client -T root

# --- 复制模式 (Vi 风格) ---
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle

# --- 窗口导航 ---
bind -r C-h previous-window
bind -r C-l next-window
